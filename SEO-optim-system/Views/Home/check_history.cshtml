@model List<SEO_optim_system.ViewModel.AnalyeseViewModel>;
@{
	ViewData["Title"] = "check_history";
	int i = 0;
}

<script src="~/lib/ChartJs/Chart.bundle.min.js"></script>

<section class="mt-3 w-75">
	<h1 class="mb-3">История проверок</h1>
	@foreach (var temp in Model)
	{
		<div class="accordion" id="accordion">
			<div class="card">
				<div class="card-header p-0" id="heading-@i">
					<h2 class="mb-0">
						<button class="btn btn-link w-100" type="button" data-toggle="collapse" data-target="#collapse-@i" aria-expanded="true" aria-controls="collapse-@i">
							@temp.Url
						</button>
					</h2>
				</div>
				<div id="collapse-@i" class="collapse" aria-labelledby="heading-@i" data-parent="#accordion">
					<div class="card-body">
						<canvas id="Chart-@i" style="width: 100%"></canvas>
					</div>
				</div>
			</div>
		</div>
		<script>
			var ctx = document.getElementById('Chart-@i').getContext('2d');
			var config = {
				type: 'line',
				data: {
					labels: [
						@foreach (var item in temp.AnalysisList)
						{
							@: "@item.Date.ToString("d")",
						}
						],
					datasets: [{
						label: 'rating',
						backgroundColor: "#FF5733",
						data: [
							@foreach (var item in temp.AnalysisList)
						{
							@: @item.Rate.ToString().Replace(",","."),
						}
						],
						fill: false
					}]
				},
				options: {
					responsive: true,
					title: {
						display: true
					},
					tooltips: {
						mode: 'index',
						intersect: false
					},
					hover: {
						mode: 'nearest',
						intersect: true
					},
					scales: {
						xAxes: [{
							display: true,
							scaleLabel: {
								display: true,
								labelString: 'Date'
							}
						}],
						yAxes: [{
							display: true,
							scaleLabel: {
								display: true,
								labelString: 'Value'
							},
							min: 0,
						}]
					}
				}
			};

			window.myLine = new Chart(ctx, config); 
		</script>
		i++;
	}
</section>

